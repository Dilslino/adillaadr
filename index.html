<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 22nd Birthday Adilla! ðŸŽ‚</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600;700&family=Pacifico&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            max-width: 100vw;
            overflow-x: hidden;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #FAF7F0 0%, #F5F1E8 50%, #E8C07D 100%);
            min-height: 100vh;
            color: #8B4513;
        }

        /* PIN Entry Section */
        .pin-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #F5F1E8 0%, #D4A574 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .pin-box {
            background: #FAF7F0;
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(139, 69, 19, 0.12);
            padding: 32px 24px 24px 24px;
            min-width: 320px;
            max-width: 90vw;
            position: relative;
            border: 3px solid #E8C07D;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .pin-header {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 8px;
            position: relative;
            margin-bottom: 12px;
        }
        .pin-heart {
            font-size: 1.6rem;
            color: #E8B4B8;
            text-shadow: 0 2px 8px #E8C07D44;
        }
        .pin-close {
            position: absolute;
            right: 0;
            top: 0;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #C8956D;
            cursor: pointer;
            transition: color 0.2s;
        }
        .pin-close:hover {
            color: #8B4513;
        }
        .pin-face {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 18px;
            font-size: 2.2rem;
            color: #8B4513;
        }
        .pin-eye {
            font-size: 1.2rem;
            margin: 0 2px;
        }
        .pin-blush {
            font-size: 1.2rem;
            color: #E8B4B8;
            margin: 0 2px;
        }
        .pin-mouth {
            font-size: 1.1rem;
            margin: 0 4px;
        }
        .pin-input-row {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #F5F1E8;
            border-radius: 12px;
            padding: 8px 18px;
            margin-bottom: 18px;
            border: 2px solid #E8C07D;
            font-size: 1.5rem;
            min-width: 180px;
            box-shadow: 0 2px 8px #E8C07D22;
        }
        .pin-heart-input {
            color: #E8B4B8;
            margin-right: 10px;
            font-size: 1.5rem;
        }
        .pin-underscores {
            letter-spacing: 10px;
            color: #C8956D;
            font-family: 'Dancing Script', cursive;
            font-size: 1.5rem;
            min-width: 80px;
            transition: color 0.2s;
        }
        .cute-keypad {
            margin-top: 8px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 12px;
            width: 100%;
            align-items: center;
            justify-items: center;
        }
        .keypad-btn {
            background: linear-gradient(145deg, #E8C07D, #D4A574);
            border: none;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            min-width: 44px;
            min-height: 44px;
            font-size: 1.3rem;
            font-weight: 600;
            color: #8B4513;
            cursor: pointer;
            box-shadow: 0 2px 8px #E8C07D33;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .keypad-btn:active {
            background: linear-gradient(145deg, #D4A574, #E8C07D);
            transform: scale(0.96);
        }
        .keypad-btn.clear {
            background: linear-gradient(145deg, #E8B4B8, #D4A574);
            color: #A0522D;
        }
        .keypad-btn.enter {
            background: linear-gradient(145deg, #E8C07D, #C8956D);
            color: #fff;
        }
        @media (max-width: 480px) {
            .pin-box {
                min-width: 0;
                max-width: 400px;
                width: 96vw;
                margin: 0 auto;
                padding: 14px 8px 18px 8px;
            }
            .pin-container {
                width: 100vw;
                max-width: 100vw;
                left: 0;
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .pin-input-row {
                min-width: 90px;
                font-size: 0.98rem;
                padding: 6px 10px;
            }
            .keypad-btn {
                width: 36px;
                height: 36px;
                min-width: 32px;
                min-height: 32px;
                font-size: 1rem;
            }
            .cute-keypad {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
                padding: 0 10px;
            }
            .pin-header-img-row {
                margin-bottom: 6px !important;
            }
            .pin-face {
                margin-bottom: 10px;
                font-size: 1.5rem;
            }
        }

        /* Countdown Section */
        .countdown-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #D4A574 0%, #C8956D 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999;
            transition: opacity 0.5s ease;
        }

        .countdown-container.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .countdown-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: #8B4513;
            margin-bottom: 30px;
            text-align: center;
        }

        .countdown-timer {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .countdown-unit {
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            min-width: 80px;
            box-shadow: 0 8px 32px rgba(139, 69, 19, 0.2);
        }

        .countdown-number {
            font-size: 2rem;
            font-weight: 700;
            color: #8B4513;
            display: block;
        }

        .countdown-label {
            font-size: 0.9rem;
            color: #A0522D;
            margin-top: 5px;
        }

        /* Main Birthday Section */
        .birthday-container {
            min-height: 100vh;
            padding: 20px;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .birthday-container.show {
            display: flex !important;
        }

        /* Floating Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #E8C07D;
            border-radius: 50%;
            animation: float 6s infinite linear;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Birthday Cake */
        .cake-container {
            position: relative;
            margin: 40px 0;
            z-index: 10;
        }

        .cake {
            width: 200px;
            height: 120px;
            background: linear-gradient(145deg, #D4A574, #C8956D);
            border-radius: 20px 20px 0 0;
            position: relative;
            box-shadow: 0 10px 30px rgba(139, 69, 19, 0.3);
        }

        .cake-layer {
            position: absolute;
            bottom: 0;
            left: 10px;
            right: 10px;
            height: 40px;
            background: linear-gradient(145deg, #C8956D, #D4A574);
            border-radius: 15px 15px 0 0;
        }

        .cake-layer:nth-child(2) {
            bottom: 40px;
            left: 20px;
            right: 20px;
            height: 35px;
        }

        .cake-layer:nth-child(3) {
            bottom: 75px;
            left: 30px;
            right: 30px;
            height: 30px;
        }

        .frosting {
            position: absolute;
            top: -10px;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(145deg, #FAF7F0, #F5F1E8);
            border-radius: 20px 20px 0 0;
        }

        .candles {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
        }

        .candle {
            width: 4px;
            height: 30px;
            background: linear-gradient(145deg, #E8C07D, #D4A574);
            border-radius: 2px;
            position: relative;
        }

        .flame {
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 8px;
            background: linear-gradient(145deg, #E8C07D, #FFD700);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: flicker 1s infinite alternate;
        }

        @keyframes flicker {
            0%, 100% {
                transform: translateX(-50%) scale(1);
                opacity: 1;
            }
            50% {
                transform: translateX(-50%) scale(1.1);
                opacity: 0.8;
            }
        }

        /* Balloons */
        .balloon {
            position: absolute;
            width: 40px;
            height: 50px;
            border-radius: 50%;
            animation: floatBalloon 8s infinite ease-in-out;
        }

        .balloon:nth-child(1) {
            background: linear-gradient(145deg, #D4A574, #C8956D);
            left: 10%;
            animation-delay: 0s;
        }

        .balloon:nth-child(2) {
            background: linear-gradient(145deg, #E8B4B8, #D4A574);
            left: 20%;
            animation-delay: 1s;
        }

        .balloon:nth-child(3) {
            background: linear-gradient(145deg, #E8C07D, #D4A574);
            left: 30%;
            animation-delay: 2s;
        }

        .balloon:nth-child(4) {
            background: linear-gradient(145deg, #C8956D, #D4A574);
            left: 70%;
            animation-delay: 3s;
        }

        .balloon:nth-child(5) {
            background: linear-gradient(145deg, #E8B4B8, #C8956D);
            left: 80%;
            animation-delay: 4s;
        }

        @keyframes floatBalloon {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-20px) rotate(2deg);
            }
            50% {
                transform: translateY(-10px) rotate(-1deg);
            }
            75% {
                transform: translateY(-30px) rotate(1deg);
            }
        }

        /* Birthday Message */
        .birthday-message {
            text-align: center;
            margin: 40px 0;
            z-index: 10;
        }

        .birthday-title {
            font-family: 'Dancing Script', cursive;
            font-size: 3rem;
            color: #8B4513;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(139, 69, 19, 0.2);
            animation: fadeInUp 1s ease-out;
        }

        .birthday-subtitle {
            font-family: 'Pacifico', cursive;
            font-size: 1.5rem;
            color: #A0522D;
            margin-bottom: 30px;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        .birthday-text {
            font-size: 1.1rem;
            color: #8B4513;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
            animation: fadeInUp 1s ease-out 0.6s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Photo Frame */
        .photo-frame {
            margin: 48px auto 0 auto;
            padding: 24px 18px 18px 18px;
            background: rgba(255, 255, 255, 0.97);
            border-radius: 24px;
            box-shadow: 0 8px 32px 0 rgba(139, 69, 19, 0.18), 0 1.5px 8px #E8C07D33;
            border: 1.5px solid #F5E6D0;
            animation: heartbeat 2s infinite;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 320px;
            width: 94vw;
        }
        .photo-slider {
            display: flex;
            width: 100%;
            transition: transform 0.4s cubic-bezier(.68,-0.55,.27,1.55);
            will-change: transform;
            margin: 0 auto;
        }
        .photo-slide {
            min-width: 100%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .photo-slide img {
            width: 220px;
            height: 220px;
            object-fit: cover;
            border-radius: 18px;
            box-shadow: 0 6px 24px #8B451322, 0 1.5px 8px #E8C07D33;
            background: #fff8;
            border: 2.5px solid #F5E6D0;
            transition: box-shadow 0.2s, border 0.2s;
        }
        .photo-slide img:active, .photo-slide img:focus {
            box-shadow: 0 8px 32px #E8C07D55;
            border: 2.5px solid #E8C07D;
        }
        .photo-indicators {
            display: flex;
            justify-content: center;
            gap: 14px;
            margin-top: 18px;
        }
        .photo-indicators .dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #E8C07D;
            opacity: 0.45;
            transition: opacity 0.2s, background 0.2s, box-shadow 0.2s;
            box-shadow: 0 1.5px 6px #E8C07D33;
        }
        .photo-indicators .dot.active {
            background: #8B4513;
            opacity: 1;
            box-shadow: 0 2.5px 10px #E8C07D55;
        }
        @media (max-width: 600px) {
            .photo-slide img { width: 120px; height: 120px; border-radius: 12px; }
            .photo-frame { max-width: 140px; padding: 12px 4px 10px 4px; }
            .photo-indicators { gap: 8px; margin-top: 10px; }
            .photo-indicators .dot { width: 9px; height: 9px; }
        }
        .birthday-container .photo-frame { margin-top: 38px; margin-bottom: 18px; }

        /* Audio Controls */
        .audio-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
        }

        .audio-btn {
            background: linear-gradient(145deg, #E8C07D, #D4A574);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: #8B4513;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.2);
            transition: all 0.3s ease;
        }

        .audio-btn:hover {
            transform: scale(1.1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .birthday-title {
                font-size: 2.5rem;
            }
            
            .birthday-subtitle {
                font-size: 1.3rem;
            }
            
            .cake {
                width: 150px;
                height: 90px;
            }
            
            .keypad-btn {
                padding: 15px;
                font-size: 1.2rem;
                min-height: 50px;
            }
            
            .countdown-title {
                font-size: 2rem;
            }
            
            .countdown-number {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .birthday-title {
                font-size: 2rem;
            }
            
            .cake {
                width: 120px;
                height: 70px;
            }
            
            .candles {
                gap: 4px;
            }
            
            .candle {
                width: 3px;
                height: 25px;
            }
            
            .flame {
                width: 5px;
                height: 6px;
            }
        }

        /* Error Animation */
        .shake {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            25% {
                transform: translateX(-5px);
            }
            75% {
                transform: translateX(5px);
            }
        }

        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #E8C07D;
            animation: confettiFall 3s linear forwards;
        }

        @keyframes confettiFall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        .pin-container.hidden {
            display: none !important;
        }
        .countdown-container.hidden {
            display: none !important;
        }
        .birthday-container.show {
            display: flex !important;
        }
        .pin-sticker {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 2;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            gap: 18px;
        }
        .pin-sticker-left { left: -110px; align-items: flex-end; }
        .pin-sticker-right { right: -110px; align-items: flex-start; }
        .pin-sticker img { width: 90px; max-width: 22vw; border-radius: 18px; box-shadow: 0 4px 18px #8B451322; background: #fff8; margin: 0 0 8px 0; transform: rotate(-6deg); opacity: 0.95; transition: transform 0.2s; }
        .pin-sticker-right img { transform: rotate(6deg); }
        @media (max-width: 600px) {
            .pin-sticker-left, .pin-sticker-right { left: -70px; right: -70px; }
            .pin-sticker img { width: 48px; }
        }
        .countdown-sticker img { width: 40px; border-radius: 12px; border: 2px solid #E8C07D; background: #fff8; }
        @media (max-width: 600px) {
            .countdown-sticker-left, .countdown-sticker-right { left: -24px; right: -24px; }
            .countdown-sticker img { width: 28px; }
        }
        .music-player-premium {
            display: flex;
            align-items: center;
            gap: 32px;
            background: rgba(250, 247, 240, 0.92);
            border-radius: 18px;
            box-shadow: 0 8px 32px rgba(139, 69, 19, 0.10);
            padding: 20px 32px;
            backdrop-filter: blur(8px);
            max-width: 600px;
            margin: 32px auto 0 auto;
            position: relative;
        }
        .music-player-premium.no-art .music-info {
            min-width: 180px;
        }
        .music-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .music-title {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 16px;
            color: #8B4513;
        }
        .music-artist {
            font-size: 14px;
            color: #8B4513;
            opacity: 0.8;
        }
        .music-progress-row {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .music-progress-bar {
            flex: 1;
            position: relative;
            height: 16px;
            display: flex;
            align-items: center;
        }
        .music-progress-bar input[type=range] {
            width: 100%;
            height: 6px;
            background: transparent;
            accent-color: #D2691E;
            z-index: 2;
            cursor: pointer;
        }
        .music-progress-bg {
            position: absolute;
            left: 0; top: 50%;
            width: 100%; height: 6px;
            background: rgba(250, 247, 240, 0.5);
            border-radius: 3px;
            transform: translateY(-50%);
            z-index: 1;
        }
        .music-progress-fg {
            position: absolute;
            left: 0; top: 50%;
            height: 6px;
            background: #D2691E;
            border-radius: 3px;
            transform: translateY(-50%);
            z-index: 2;
            width: 0;
            pointer-events: none;
        }
        .music-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .music-btn {
            background: linear-gradient(145deg, #FAF7F0, #E8C07D);
            border: none;
            border-radius: 50%;
            width: 44px; height: 44px;
            color: #8B4513;
            font-size: 1.5rem;
            box-shadow: 0 2px 8px #E8C07D33;
            transition: transform 0.3s, background 0.3s;
            cursor: pointer;
        }
        .music-btn-main {
            width: 56px; height: 56px;
            font-size: 2rem;
            background: linear-gradient(145deg, #D2691E, #CD853F);
            color: #fff;
        }
        .music-btn:hover, .music-btn:focus {
            background: #A0522D;
            color: #fff;
            transform: scale(1.08);
        }
        .music-volume {
            display: flex;
            align-items: center;
            gap: 4px;
            margin-left: 8px;
        }
        .music-volume input[type=range] {
            width: 60px;
            accent-color: #D2691E;
        }
        @media (max-width: 600px) {
            .music-player-premium {
                flex-direction: column;
                gap: 12px;
                padding: 12px 8px;
                max-width: 98vw;
            }
            .music-btn { width: 32px; height: 32px; font-size: 1.1rem; }
            .music-btn-main { width: 40px; height: 40px; font-size: 1.4rem; }
            .music-volume input[type=range] { width: 36px; }
        }
        /* After Countdown Animation Styles */
        #afterCountdownAnim {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #D4A574 0%, #C8956D 100%);
            transition: opacity 0.5s;
        }
        .after-anim-bg {
            position: absolute;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(135deg, #D4A574 0%, #C8956D 100%);
            z-index: 0;
        }
        .after-anim-seq {
            position: relative;
            z-index: 2;
            width: 100vw;
            max-width: 420px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 32px;
        }
        .hey-anim {
            font-family: 'Playfair Display', 'Poppins', serif;
            font-size: 3.2rem;
            color: #8B4513;
            opacity: 0;
            transform: scale(0.8);
            animation: heyFadeIn 2.2s cubic-bezier(.68,-0.55,.27,1.55) forwards;
            margin-bottom: 12px;
            letter-spacing: 2px;
            text-align: center;
            text-shadow: 0 4px 24px #C8956D33;
        }
        .hey-anim.hide {
            animation: heyFadeOut 0.7s ease forwards;
        }
        @keyframes heyFadeIn {
            0% { opacity: 0; transform: scale(0.8); }
            70% { opacity: 1; transform: scale(1.05); }
            85% { transform: scale(0.97); }
            100% { opacity: 1; transform: scale(1.0); }
        }
        @keyframes heyFadeOut {
            0% { opacity: 1; transform: scale(1.0); }
            100% { opacity: 0; transform: scale(0.9); }
        }
        .chat-anim {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 6px;
        }
        .chat-anim.show {
            display: flex;
            animation: chatFadeIn 0.7s ease forwards;
        }
        @keyframes chatFadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chat-input-row {
            width: 100%;
            display: flex;
            align-items: center;
            background: #F5F5DC;
            border-radius: 18px;
            box-shadow: 0 2px 12px #8B451322;
            padding: 10px 16px;
            gap: 16px;
            position: relative;
            flex-wrap: wrap;
        }
        .chat-input {
            flex: 1;
            border: none;
            outline: none;
            background: transparent;
            font-family: 'Inter', 'Poppins', sans-serif;
            font-size: 1.1rem;
            color: #8B4513;
            background: transparent;
            min-width: 0;
            width: 0;
        }
        .chat-send-btn {
            background: linear-gradient(145deg, #FF8C00, #C8956D);
            color: #fff;
            border: none;
            border-radius: 12px;
            padding: 6px 18px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 2px 8px #E8C07D33;
            transition: background 0.2s, transform 0.2s;
            white-space: nowrap;
        }
        .chat-send-btn:active {
            background: #8B4513;
            transform: scale(0.97);
        }
        .chat-cursor {
            font-size: 1.2rem;
            color: #8B4513;
            margin-left: 2px;
            animation: blinkCursor 1s steps(1) infinite;
            user-select: none;
        }
        @keyframes blinkCursor {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }
        .chat-response-anim {
            display: none;
            width: 100%;
            align-items: flex-end;
            justify-content: flex-end;
        }
        .chat-response-anim.show {
            display: flex;
            animation: responseSlideIn 0.7s cubic-bezier(.68,-0.55,.27,1.55) forwards;
        }
        .chat-bubble {
            background: #F5F5DC;
            color: #8B4513;
            border-radius: 18px 18px 4px 18px;
            box-shadow: 0 2px 12px #8B451322;
            padding: 12px 20px;
            font-family: 'Poppins', sans-serif;
            font-size: 1.1rem;
            max-width: 80vw;
            margin-top: 8px;
            margin-right: 0;
            opacity: 0;
            transform: translateX(60px);
            animation: bubbleIn 0.7s 0.1s forwards;
        }
        @keyframes responseSlideIn {
            from { opacity: 0; transform: translateX(60px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes bubbleIn {
            from { opacity: 0; transform: translateX(60px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .after-anim-skip {
            position: absolute;
            top: 18px; right: 18px;
            background: rgba(255,255,255,0.7);
            color: #8B4513;
            border: none;
            border-radius: 12px;
            padding: 6px 16px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 2px 8px #E8C07D33;
            z-index: 10;
            transition: background 0.2s, color 0.2s;
        }
        .after-anim-skip:active {
            background: #C8956D;
            color: #fff;
        }
        @media (max-width: 600px) {
            .after-anim-seq { max-width: 98vw; }
            .hey-anim { font-size: 2.1rem; }
            .chat-bubble { font-size: 1rem; }
        }
        
        /* Footer Credit */
        .footer-credit {
            position: fixed !important;
            bottom: 8px !important;
            left: 8px !important;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            padding: 6px 12px;
            box-shadow: 0 2px 12px rgba(139, 69, 19, 0.15);
            backdrop-filter: blur(8px);
            z-index: 9999 !important;
            display: flex !important;
            align-items: center;
            gap: 6px;
            font-family: 'Poppins', sans-serif;
            font-size: 0.75rem;
            color: #8B4513;
            font-weight: 500;
            pointer-events: auto;
            transform: none !important;
        }
        .footer-credit a {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #8B4513;
            text-decoration: none;
            transition: color 0.2s;
        }
        .footer-credit a:hover {
            color: #FF8C00;
        }
        .footer-credit .instagram-icon {
            width: 12px;
            height: 12px;
            object-fit: cover;
            filter: drop-shadow(0 1px 2px rgba(139, 69, 19, 0.3));
        }
        @media (max-width: 480px) {
            .footer-credit {
                font-size: 0.65rem;
                padding: 4px 8px;
            }
            .footer-credit .instagram-icon {
                width: 10px;
                height: 10px;
            }
        }
        /* Animated Love Around Photo */
        .love-anim {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 18px;
            z-index: 2;
            pointer-events: none;
        }
        .love-anim-left { left: -38px; align-items: flex-end; }
        .love-anim-right { right: -38px; align-items: flex-start; }
        .love-shape {
            display: inline-block;
            animation: loveFloat 2.8s infinite ease-in-out;
            animation-delay: calc(var(--love-delay, 0s));
            filter: drop-shadow(0 2px 8px #E8C07D33);
        }
        .love-anim-left .love-shape:nth-child(1) { --love-delay: 0s; }
        .love-anim-left .love-shape:nth-child(2) { --love-delay: 0.5s; }
        .love-anim-left .love-shape:nth-child(3) { --love-delay: 1s; }
        .love-anim-right .love-shape:nth-child(1) { --love-delay: 0.3s; }
        .love-anim-right .love-shape:nth-child(2) { --love-delay: 0.8s; }
        .love-anim-right .love-shape:nth-child(3) { --love-delay: 1.2s; }
        @keyframes loveFloat {
            0% { transform: translateY(0) scale(1) rotate(-8deg); }
            30% { transform: translateY(-10px) scale(1.08) rotate(8deg); }
            60% { transform: translateY(6px) scale(0.96) rotate(-6deg); }
            100% { transform: translateY(0) scale(1) rotate(-8deg); }
        }
        @media (max-width: 600px) {
            .love-anim-left, .love-anim-right { left: -22px; right: -22px; }
            .love-shape svg { width: 12px !important; height: 10px !important; }

            /* Balloons mobile fix */
            .balloon {
                width: 22px;
                height: 28px;
                top: 8px !important;
            }
            .balloon:nth-child(1) { left: 4%; top: 24px !important; }
            .balloon:nth-child(2) { left: 18%; top: 10px !important; }
            .balloon:nth-child(3) { left: 50%; top: 0 !important; transform: translateX(-50%); }
            .balloon:nth-child(4) { left: 74%; top: 10px !important; }
            .balloon:nth-child(5) { left: 88%; top: 24px !important; }

            .cake-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }
            .cake {
                margin-left: auto;
                margin-right: auto;
            }
            .btn-tiup-lilin {
                margin-left: auto;
                margin-right: auto;
                display: block;
            }
        }
        .btn-tiup-lilin {
            background: linear-gradient(135deg, #FFD9B2 0%, #E8C07D 100%);
            color: #8B4513;
            font-family: 'Poppins', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 32px;
            padding: 12px 36px;
            margin-top: 0;
            box-shadow: 0 4px 18px #E8C07D33;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
            outline: none;
        }
        .btn-tiup-lilin:hover, .btn-tiup-lilin:focus {
            background: linear-gradient(135deg, #E8C07D 0%, #FFD9B2 100%);
            transform: scale(1.04);
            box-shadow: 0 6px 24px #E8C07D55;
        }
        .flame {
            transition: opacity 0.5s;
        }
        .flame.off {
            opacity: 0 !important;
        }
        .photo-slider {
            display: flex;
            width: 100%;
            transition: transform 0.4s cubic-bezier(.68,-0.55,.27,1.55);
            will-change: transform;
        }
        .photo-slide {
            min-width: 100%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .photo-slide img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 15px;
            box-shadow: 0 4px 18px #8B451322;
            background: #fff8;
        }
        .photo-indicators {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 10px;
        }
        .photo-indicators .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #E8C07D;
            opacity: 0.5;
            transition: opacity 0.2s, background 0.2s;
        }
        .photo-indicators .dot.active {
            background: #8B4513;
            opacity: 1;
        }
        @media (max-width: 600px) {
            .photo-slide img { width: 120px; height: 120px; }
            .photo-frame { max-width: 140px; }
        }
        .chat-bubble-user {
            background: #F5F5DC;
            color: #8B4513;
            border-radius: 18px 18px 4px 18px;
            box-shadow: 0 2px 12px #8B451322;
            padding: 12px 20px;
            font-family: 'Poppins', sans-serif;
            font-size: 1.1rem;
            max-width: 90%;
            margin-top: 4px;
            margin-bottom: 0;
            margin-right: auto;
            margin-left: 0;
            opacity: 1;
            transform: none;
            animation: none;
        }
        .chat-bubble-user.show {
            animation: bubbleInUser 0.7s cubic-bezier(.68,-0.55,.27,1.55) forwards;
        }
        @keyframes bubbleInUser {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @media (max-width: 480px) {
            .chat-bubble-user {
                font-size: 0.98rem;
                padding: 10px 12px;
                max-width: 98vw;
            }
            .chat-anim { gap: 4px; }
        }
        @media (max-width: 600px) {
            .countdown-timer {
                flex-wrap: wrap;
                gap: 10px;
                justify-content: center;
            }
            .countdown-unit {
                min-width: 44vw;
                max-width: 48vw;
                margin: 0 auto;
                padding: 12px 0;
                font-size: 0.98rem;
            }
            .countdown-number {
                font-size: 1.2rem;
            }
            .countdown-label {
                font-size: 0.8rem;
            }
        }
        /* Weather Animation */
        .weather-anim {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 20;
            display: flex;
            align-items: flex-start;
            justify-content: center;
        }
        .rain-drop {
            position: absolute;
            width: 3px; height: 18px;
            background: linear-gradient(180deg, #A2C6F9 60%, #6BA4E7 100%);
            border-radius: 2px;
            opacity: 0.7;
            animation: rainDrop 1.1s linear infinite;
        }
        @keyframes rainDrop {
            0% { transform: translateY(-30px); opacity: 0.7; }
            80% { opacity: 0.8; }
            100% { transform: translateY(120px); opacity: 0; }
        }
        .weather-sun {
            position: absolute;
            top: 32px; left: 50%;
            transform: translateX(-50%);
            width: 60px; height: 60px;
            background: radial-gradient(circle at 60% 40%, #FFD700 80%, #FFEC8B 100%);
            border-radius: 50%;
            box-shadow: 0 0 32px 8px #FFD70055;
            opacity: 0;
            transition: opacity 0.8s;
            z-index: 22;
        }
        .weather-sun.show { opacity: 1; }
        .weather-cloud {
            position: absolute;
            top: 38px; left: 50%;
            transform: translateX(-50%);
            width: 90px; height: 38px;
            background: none;
            opacity: 0;
            transition: opacity 0.8s;
            z-index: 23;
        }
        .weather-cloud.show { opacity: 1; }
        .weather-cloud svg { width: 90px; height: 38px; }
        @media (max-width: 600px) {
            .weather-sun { width: 36px; height: 36px; top: 18px; }
            .weather-cloud { width: 54px; height: 22px; top: 18px; }
            .weather-cloud svg { width: 54px; height: 22px; }
        }
        
        /* Snow Animation for PIN Page */
        .snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .snowflake {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #fff;
            border-radius: 50%;
            opacity: 0.8;
            animation: snowfall linear infinite;
        }
        
        @keyframes snowfall {
            0% {
                transform: translateY(-10px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        /* SOS Game Modal */
        .sos-modal-bg {
            position: fixed; left: 0; top: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.18);
            z-index: 99999;
            display: flex; align-items: center; justify-content: center;
            transition: opacity 0.3s;
        }
        .sos-modal {
            background: #fff;
            border-radius: 22px;
            box-shadow: 0 8px 32px #E8C07D55;
            padding: 32px 18px 24px 18px;
            min-width: 280px;
            max-width: 94vw;
            display: flex; flex-direction: column; align-items: center;
            position: relative;
        }
        .sos-close-btn {
            position: absolute; top: 12px; right: 18px;
            background: none; border: none; font-size: 1.5rem; color: #C8956D; cursor: pointer;
        }
        .sos-title { font-family: 'Dancing Script', cursive; font-size: 2rem; color: #E8B4B8; margin-bottom: 18px; }
        .sos-board {
            display: grid; grid-template-columns: repeat(3, 54px); grid-template-rows: repeat(3, 54px);
            gap: 10px; margin-bottom: 18px;
        }
        .sos-cell {
            width: 54px; height: 54px; background: #FAF7F0;
            border-radius: 12px; box-shadow: 0 2px 8px #E8C07D33;
            font-size: 2.2rem; color: #E8B4B8;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: background 0.2s;
            user-select: none;
        }
        .sos-cell.x { color: #8B4513; }
        .sos-cell.heart { color: #E8B4B8; }
        .sos-result { font-size: 1.2rem; color: #8B4513; margin-bottom: 8px; font-weight: 600; }
        .sos-modal-bg.hide { display: none !important; }
        @media (max-width: 600px) {
            .sos-board { grid-template-columns: repeat(3, 36px); grid-template-rows: repeat(3, 36px); gap: 6px; }
            .sos-cell { width: 36px; height: 36px; font-size: 1.3rem; }
            .sos-modal { padding: 18px 4px 12px 4px; }
        }
        .countdown-playgame-row {
            width: 100%;
            display: flex;
            justify-content: center;
            margin-top: 32px;
        }
        .btn-playgame {
            background: linear-gradient(135deg, #FFD9B2 0%, #E8C07D 100%);
            color: #8B4513;
            font-family: 'Poppins', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 32px;
            padding: 12px 36px;
            box-shadow: 0 4px 18px #E8C07D33;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
            outline: none;
            z-index: 2001;
            min-width: 120px;
            max-width: 90vw;
        }
        .btn-playgame:hover, .btn-playgame:focus {
            background: linear-gradient(135deg, #E8C07D 0%, #FFD9B2 100%);
            transform: scale(1.04);
            box-shadow: 0 6px 24px #E8C07D55;
        }
        @media (max-width: 600px) {
            .countdown-playgame-row {
                position: fixed !important;
                left: 50% !important;
                transform: translateX(-50%) !important;
                bottom: 20px !important;
                width: auto !important;
                margin: 0 auto !important;
                justify-content: center !important;
                z-index: 2001 !important;
            }
            .btn-playgame {
                width: 90vw !important;
                min-width: 0 !important;
                max-width: 98vw !important;
                font-size: 1.05rem !important;
                padding: 14px 0 !important;
                border-radius: 24px !important;
                margin: 0 auto !important;
                display: block !important;
            }
            .countdown-container {
                padding-bottom: 80px !important;
            }
        }
        /* Tambahan untuk Play Game agar presisi tengah bawah */
        .countdown-playgame-row.fixed-center {
            position: fixed !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            bottom: 80px !important;
            width: auto !important;
            margin: 0 auto !important;
            z-index: 2001 !important;
            display: block !important;
            justify-content: unset !important;
        }
        @media (max-width: 600px) {
            .countdown-playgame-row.fixed-center {
                bottom: 80px !important;
            }
            .btn-playgame {
                width: auto !important;
                min-width: 120px !important;
                max-width: 98vw !important;
                margin: 0 auto !important;
                display: block !important;
            }
        }
    </style>
</head>
<body>
    <!-- Footer Credit - Always Visible -->
    <div class="footer-credit">
        <span>Created by:</span>
        <a href="https://www.instagram.com/xdiilll?igsh=MTB1Z21yeWZ1ZDl0" target="_blank">
            xDill <img src="logoig.jpg" alt="Instagram" class="instagram-icon">
        </a>
    </div>

    <!-- PIN Entry Section -->
    <div class="pin-container" id="pinContainer" style="position: relative;">
        <!-- Snow Container for PIN Page -->
        <div class="snow-container" id="snowContainer"></div>
        <div class="pin-sticker pin-sticker-left">
            <img src="sticker1.jpg" alt="sticker kiri 1">
            <img src="sticker2.jpg" alt="sticker kiri 2">
            <img src="sticker3.jpg" alt="sticker kiri 3">
        </div>
        <div class="pin-sticker pin-sticker-right">
            <img src="sticker4.jpg" alt="sticker kanan 1">
            <img src="sticker5.jpg" alt="sticker kanan 2">
            <img src="sticker6.jpg" alt="sticker kanan 3">
        </div>
        <div class="pin-box">
            <div class="pin-header-img-row" style="display:flex;align-items:center;justify-content:center;margin-bottom:12px;gap:8px;">
                <span style="display:inline-block;width:18px;height:18px;background:#8B4513;border-radius:50%;"></span>
                <img src="nailoong.jpg" alt="nailoong" style="width:32px;height:32px;border-radius:50%;object-fit:cover;box-shadow:0 2px 8px #8B451344;">
                <span style="display:inline-block;width:8px;height:8px;background:#8B4513;border-radius:50%;"></span>
                <img src="nailoong.jpg" alt="nailoong" style="width:32px;height:32px;border-radius:50%;object-fit:cover;box-shadow:0 2px 8px #8B451344;">
                <span style="display:inline-block;width:18px;height:18px;background:#8B4513;border-radius:50%;"></span>
            </div>
            <div class="pin-face">
                <span class="pin-eye">&#11044;</span>
                <span class="pin-blush">&#x1F97A;</span>
                <span class="pin-mouth">&#x25CF;</span>
                <span class="pin-blush">&#x1F97A;</span>
                <span class="pin-eye">&#11044;</span>
            </div>
            <div class="pin-input-row">
                <span class="pin-heart-input">&#x2764;</span>
                <span class="pin-underscores" id="pinInput">
                    _ _ _ _
                </span>
            </div>
            <div class="keypad cute-keypad">
                <button class="keypad-btn" onclick="addDigit('1')">1</button>
                <button class="keypad-btn" onclick="addDigit('2')">2</button>
                <button class="keypad-btn" onclick="addDigit('3')">3</button>
                <button class="keypad-btn" onclick="addDigit('4')">4</button>
                <button class="keypad-btn" onclick="addDigit('5')">5</button>
                <button class="keypad-btn" onclick="addDigit('6')">6</button>
                <button class="keypad-btn" onclick="addDigit('7')">7</button>
                <button class="keypad-btn" onclick="addDigit('8')">8</button>
                <button class="keypad-btn" onclick="addDigit('9')">9</button>
                <button class="keypad-btn clear" onclick="clearPin()" style="grid-column:1;grid-row:4;">&#x232B;</button>
                <button class="keypad-btn" onclick="addDigit('0')" style="grid-column:2;grid-row:4;">0</button>
                <button class="keypad-btn enter" onclick="checkPin()" style="grid-column:3;grid-row:4;">&#x2714;</button>
            </div>
        </div>
    </div>

    <!-- Countdown Section -->
    <div class="countdown-container" id="countdownContainer">
        <div class="weather-anim" id="weatherAnim"></div>
        <!-- Reset Button for Testing -->
        <!-- (Dihapus sesuai permintaan) -->
        <div class="countdown-sticker countdown-sticker-left">
            <img src="sticker1.jpg" alt="sticker kiri 1">
            <img src="sticker2.jpg" alt="sticker kiri 2">
            <img src="sticker3.jpg" alt="sticker kiri 3">
        </div>
        <div class="countdown-sticker countdown-sticker-right">
            <img src="sticker4.jpg" alt="sticker kanan 1">
            <img src="sticker5.jpg" alt="sticker kanan 2">
            <img src="sticker6.jpg" alt="sticker kanan 3">
        </div>
        <h1 class="countdown-title">Almost there...</h1>
        <div class="countdown-timer" id="countdownTimer">
            <div class="countdown-unit">
                <span class="countdown-number" id="days">00</span>
                <div class="countdown-label">Days</div>
            </div>
            <div class="countdown-unit">
                <span class="countdown-number" id="hours">00</span>
                <div class="countdown-label">Hours</div>
            </div>
            <div class="countdown-unit">
                <span class="countdown-number" id="minutes">00</span>
                <div class="countdown-label">Minutes</div>
            </div>
            <div class="countdown-unit">
                <span class="countdown-number" id="seconds">00</span>
                <div class="countdown-label">Seconds</div>
            </div>
        </div>
        <!-- Music Player Premium Start -->
        <div class="music-player-premium no-art">
          <div class="music-info">
            <div class="music-title" id="musicTitle">Judul Lagu</div>
            <div class="music-artist" id="musicArtist">Artist</div>
            <div class="music-progress-row">
              <span id="currentTime">0:00</span>
              <div class="music-progress-bar">
                <input type="range" id="progressBar" min="0" max="100" value="0">
                <div class="music-progress-bg"></div>
                <div class="music-progress-fg" id="progressFg"></div>
              </div>
              <span id="totalTime">0:00</span>
            </div>
          </div>
          <div class="music-controls">
            <button id="prevBtn" class="music-btn"><span>â®ï¸</span></button>
            <button id="playPauseBtn" class="music-btn music-btn-main"><span>â–¶ï¸</span></button>
            <button id="nextBtn" class="music-btn"><span>â­ï¸</span></button>
            <div class="music-volume">
              <span>ðŸ”Š</span>
              <input id="volumeSlider" type="range" min="0" max="1" step="0.01" value="0.7">
            </div>
          </div>
          <audio id="audioPlayer" preload="auto"></audio>
        </div>
        <!-- Music Player Premium End -->
        <!-- After Countdown Animation Sequence -->
        <div id="afterCountdownAnim" style="display:none;">
          <div class="after-anim-bg"></div>
          <div class="after-anim-seq">
            <div class="hey-anim" id="heyAnim">Hey</div>
            <div class="chat-anim" id="chatAnim">
              <div class="chat-bubble chat-bubble-user" id="chatBubble1" style="opacity:0;transform:translateY(20px);">it's the birthday of the</div>
              <div class="chat-bubble chat-bubble-user" id="chatBubble2" style="opacity:0;transform:translateY(20px);">most beautiful woman in the world</div>
            </div>
            <div class="chat-response-anim" id="chatResponseAnim">
              <div class="chat-bubble">Yes, absolutely! ðŸŽ‰</div>
            </div>
          </div>
        </div>
        <!-- Play Game Button (hanya di countdown) -->
        <div class="countdown-playgame-row" style="margin:32px auto 0 auto; display:flex; justify-content:center; width:100%;">
            <button class="btn-playgame" id="btnPlayGame" style="background:linear-gradient(135deg,#FFD9B2,#E8C07D);color:#8B4513;font-weight:600;box-shadow:0 4px 12px rgba(139,69,19,0.3);transition:all 0.3s ease;min-width:120px;max-width:98vw;">Play Game</button>
        </div>
    </div>

    <!-- Main Birthday Section -->
    <div class="birthday-container" id="birthdayContainer">
        <!-- Floating Particles -->
        <div class="particles" id="particles"></div>

        <!-- Floating Balloons -->
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>

        <!-- Birthday Message -->
        <div class="birthday-message">
            <h1 class="birthday-title">Happy 22nd Birthday Adilla!</h1>
            <h2 class="birthday-subtitle">ðŸŽ‚ A Special Day Just For You ðŸŽ‚</h2>
            <p class="birthday-text">
                Today is all about celebrating you and the amazing person you are. 
                May your 22nd year be filled with love, joy, and beautiful moments. 
                You deserve all the happiness in the world! âœ¨
            </p>
        </div>

        <!-- Birthday Cake -->
        <div class="cake-container">
            <div class="cake">
                <div class="cake-layer"></div>
                <div class="cake-layer"></div>
                <div class="cake-layer"></div>
                <div class="frosting"></div>
                <div class="candles">
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                </div>
            </div>
            <!-- Tombol Tiup Lilinnya -->
            <div style="width:100%;display:flex;justify-content:center;margin-top:18px;">
                <button id="btnTiupLilin" class="btn-tiup-lilin">Tiup Lilinnya</button>
            </div>
        </div>

        <!-- Photo Frame -->
        <div class="photo-frame" style="position:relative;overflow:hidden;max-width:260px;width:90vw;">
            <!-- Animated Loves Left -->
            <div class="love-anim love-anim-left">
                <span class="love-shape" style="--love-color:#E8B4B8;"><svg viewBox="0 0 40 36" width="26" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 33s-13-8.1-13-17C7 5.6 12.1 2 17 2c2.6 0 5 1.3 7 3.4C26 3.3 28.4 2 31 2c4.9 0 10 3.6 10 10 0 8.9-13 17-13 17z" fill="var(--love-color,#E8B4B8)" stroke="#fff" stroke-width="1.5"/></svg></span>
                <span class="love-shape" style="--love-color:#E8C07D;"><svg viewBox="0 0 40 36" width="20" height="18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 33s-13-8.1-13-17C7 5.6 12.1 2 17 2c2.6 0 5 1.3 7 3.4C26 3.3 28.4 2 31 2c4.9 0 10 3.6 10 10 0 8.9-13 17-13 17z" fill="var(--love-color,#E8C07D)" stroke="#fff" stroke-width="1.5"/></svg></span>
                <span class="love-shape" style="--love-color:#C8956D;"><svg viewBox="0 0 40 36" width="16" height="14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 33s-13-8.1-13-17C7 5.6 12.1 2 17 2c2.6 0 5 1.3 7 3.4C26 3.3 28.4 2 31 2c4.9 0 10 3.6 10 10 0 8.9-13 17-13 17z" fill="var(--love-color,#C8956D)" stroke="#fff" stroke-width="1.5"/></svg></span>
            </div>
            <!-- Animated Loves Right -->
            <div class="love-anim love-anim-right">
                <span class="love-shape" style="--love-color:#D4A574;"><svg viewBox="0 0 40 36" width="20" height="18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 33s-13-8.1-13-17C7 5.6 12.1 2 17 2c2.6 0 5 1.3 7 3.4C26 3.3 28.4 2 31 2c4.9 0 10 3.6 10 10 0 8.9-13 17-13 17z" fill="var(--love-color,#D4A574)" stroke="#fff" stroke-width="1.5"/></svg></span>
                <span class="love-shape" style="--love-color:#E8B4B8;"><svg viewBox="0 0 40 36" width="26" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 33s-13-8.1-13-17C7 5.6 12.1 2 17 2c2.6 0 5 1.3 7 3.4C26 3.3 28.4 2 31 2c4.9 0 10 3.6 10 10 0 8.9-13 17-13 17z" fill="var(--love-color,#E8B4B8)" stroke="#fff" stroke-width="1.5"/></svg></span>
                <span class="love-shape" style="--love-color:#8B4513;"><svg viewBox="0 0 40 36" width="16" height="14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 33s-13-8.1-13-17C7 5.6 12.1 2 17 2c2.6 0 5 1.3 7 3.4C26 3.3 28.4 2 31 2c4.9 0 10 3.6 10 10 0 8.9-13 17-13 17z" fill="var(--love-color,#8B4513)" stroke="#fff" stroke-width="1.5"/></svg></span>
            </div>
            <!-- Photo Slider -->
            <div class="photo-slider" id="photoSlider">
                <div class="photo-slide"><img src="photo1.jpg" alt="Photo 1" /></div>
                <div class="photo-slide"><img src="photo2.jpg" alt="Photo 2" /></div>
                <div class="photo-slide"><img src="photo3.jpg" alt="Photo 3" /></div>
            </div>
            <div class="photo-indicators" id="photoIndicators"></div>
        </div>

        <!-- Audio Controls -->
    </div>

    <!-- Tambahkan modal SOS di akhir body -->
    <div class="sos-modal-bg hide" id="sosModalBg">
      <div class="sos-modal">
        <button class="sos-close-btn" id="sosCloseBtn">&times;</button>
        <div class="sos-title">SOS Game</div>
        <div class="sos-result" id="sosResult"></div>
        <div class="sos-board" id="sosBoard"></div>
      </div>
    </div>

    <script>
        // PIN System
        let currentPin = '';
        const correctPin = '1407'; // PIN baru
        // Atur countdown agar tidak mengulang saat refresh atau input PIN ulang
        let countdownTarget;
        // Ambil dari localStorage jika ada, jika tidak set 1 hari 8 jam 40 menit dari sekarang
        if (localStorage.getItem('birthdayCountdownTarget')) {
            countdownTarget = new Date(localStorage.getItem('birthdayCountdownTarget'));
        } else {
            countdownTarget = new Date(Date.now() + 60*1000); // 1 menit
            localStorage.setItem('birthdayCountdownTarget', countdownTarget.toISOString());
        }
        let birthdayDate = countdownTarget;

        function addDigit(digit) {
            if (currentPin.length < 4) {
                currentPin += digit;
                updatePinDisplay();
            }
        }

        function clearPin() {
            currentPin = '';
            updatePinDisplay();
        }

        function updatePinDisplay() {
            const display = document.getElementById('pinInput');
            let pinVisual = '';
            for (let i = 0; i < 4; i++) {
                if (i < currentPin.length) {
                    pinVisual += '<span style="color:#E8B4B8;font-size:1.3em">&#10084;</span> ';
                } else {
                    pinVisual += '_ ';
                }
            }
            display.innerHTML = pinVisual.trim();
        }

        function checkPin() {
            if (currentPin.length !== 4) return; // Hanya cek jika 4 digit
            if (currentPin === correctPin) {
                alert('kamu pinter bgt Adilla');
                checkBirthdayDate();
            } else {
                alert('pin kamu salah dilleeehh');
                const display = document.getElementById('pinInput');
                display.classList.add('shake');
                setTimeout(() => {
                    display.classList.remove('shake');
                }, 500);
                clearPin();
            }
        }

        // Birthday Date Check
        function checkBirthdayDate() {
            const now = new Date();
            console.log('checkBirthdayDate:', now, 'vs', birthdayDate);
            if (now >= birthdayDate) {
                showBirthday();
            } else {
                showCountdown();
            }
        }

        function showCountdown() {
            console.log('showCountdown called');
            document.getElementById('pinContainer').classList.add('hidden');
            document.getElementById('countdownContainer').classList.remove('hidden');
            document.getElementById('birthdayContainer').classList.remove('show');
            console.log('Countdown container classes:', document.getElementById('countdownContainer').className);
            
            // Show weather animation only during countdown
            const weatherAnim = document.getElementById('weatherAnim');
            if (weatherAnim) {
                weatherAnim.style.display = 'block';
            }
            
            startCountdown();
        }

        function showBirthday() {
            console.log('showBirthday called');
            document.getElementById('pinContainer').classList.add('hidden');
            document.getElementById('countdownContainer').classList.add('hidden');
            document.getElementById('birthdayContainer').classList.add('show');
            
            // Hide weather animation on birthday page
            const weatherAnim = document.getElementById('weatherAnim');
            if (weatherAnim) {
                weatherAnim.style.display = 'none';
            }
            
            createParticles();
            createConfetti();
        }

        // Countdown Timer
        function startCountdown() {
            console.log('startCountdown called');
            console.log('birthdayDate:', birthdayDate);
            console.log('Current time:', new Date());
            console.log('Time left:', birthdayDate - new Date());
            
            const countdown = setInterval(() => {
                const now = new Date();
                const timeLeft = birthdayDate - now;
                console.log('Time left in interval:', timeLeft);
                
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    console.log('Countdown finished!');
                    // Simpan flag ke localStorage agar tidak mengulang countdown
                    localStorage.setItem('birthdayUnlocked', 'true');
                    // showBirthday();
                    triggerAfterCountdownAnim();
                    return;
                }
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            }, 1000);
        }

        // Particles Animation
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 6 + 's';
                    particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                    particlesContainer.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 6000);
                }, i * 200);
            }
        }

        // Confetti Animation
        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = ['#E8C07D', '#D4A574', '#E8B4B8', '#C8956D'][Math.floor(Math.random() * 4)];
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 50);
            }
        }

        // Audio Controls
        let audioPlaying = false;
        function toggleAudio() {
            const audioBtn = document.getElementById('audioBtn');
            if (audioPlaying) {
                audioBtn.textContent = 'ðŸŽµ';
                audioPlaying = false;
            } else {
                audioBtn.textContent = 'â¸ï¸';
                audioPlaying = true;
                // Here you would add actual audio functionality
            }
        }

        // Playlist logic
        const playlist = [
            { src: 'music1.mp3', title: 'about you' },
            { src: 'music2.mp3', title: 'W.H.U.T' },
            { src: 'music3.mp3', title: 'Bergema sampai selamanya' }
        ];
        let currentTrack = 0;
        const audioPlayer = document.getElementById('audioPlayer');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const musicTitle = document.getElementById('musicTitle');

        function loadTrack(idx) {
            audioPlayer.src = playlist[idx].src;
            musicTitle.textContent = playlist[idx].title;
        }
        function playTrack() {
            audioPlayer.play();
            playPauseBtn.textContent = 'â¸ï¸';
        }
        function pauseTrack() {
            audioPlayer.pause();
            playPauseBtn.textContent = 'â–¶ï¸';
        }
        playPauseBtn.onclick = function() {
            if (audioPlayer.paused) playTrack(); else pauseTrack();
        };
        prevBtn.onclick = function() {
            currentTrack = (currentTrack - 1 + playlist.length) % playlist.length;
            loadTrack(currentTrack);
            playTrack();
        };
        nextBtn.onclick = function() {
            currentTrack = (currentTrack + 1) % playlist.length;
            loadTrack(currentTrack);
            playTrack();
        };
        volumeSlider.oninput = function() {
            audioPlayer.volume = volumeSlider.value;
        };
        audioPlayer.onended = function() {
            nextBtn.onclick();
        };
        // Inisialisasi
        loadTrack(currentTrack);
        audioPlayer.volume = volumeSlider.value;

        // Balloon Pop Interaction
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('balloon')) {
                e.target.style.animation = 'none';
                e.target.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    e.target.style.opacity = '0';
                    createConfetti();
                }, 200);
            }
        });

        // Cake Candle Blow Interaction
        document.addEventListener('click', function(e) {
            if (e.target.closest('.cake-container')) {
                const flames = document.querySelectorAll('.flame');
                flames.forEach((flame, index) => {
                    setTimeout(() => {
                        flame.style.animation = 'none';
                        flame.style.opacity = '0';
                    }, index * 100);
                });
                setTimeout(() => {
                    createConfetti();
                }, 1000);
            }
        });

        // Reset Countdown Function
        function resetCountdown() {
            // Fungsi ini sudah tidak digunakan, dibiarkan kosong atau bisa dihapus seluruhnya
        }
        
        // Reset and Replay Function (for birthday page)
        function resetAndReplay() {
            console.log('Resetting and replaying from after countdown...');
            
            // Clear localStorage
            localStorage.removeItem('birthdayUnlocked');
            localStorage.removeItem('birthdayCountdownTarget');
            
            // Reset countdown target to 1 menit dari sekarang
            countdownTarget = new Date(Date.now() + 60*1000);
            birthdayDate = countdownTarget;
            localStorage.setItem('birthdayCountdownTarget', countdownTarget.toISOString());
            
            // Hide birthday page and show countdown
            document.getElementById('birthdayContainer').classList.remove('show');
            document.getElementById('pinContainer').classList.add('hidden');
            document.getElementById('countdownContainer').classList.remove('hidden');
            
            // Reset countdown display
            document.getElementById('countdownTimer').style.display = 'flex';
            document.querySelector('.music-player-premium').style.display = 'flex';
            document.querySelector('.countdown-title').style.display = 'block';
            document.querySelector('.countdown-sticker-left').style.display = 'block';
            document.querySelector('.countdown-sticker-right').style.display = 'block';
            
            // Hide after countdown animation
            const afterAnim = document.getElementById('afterCountdownAnim');
            afterAnim.style.display = 'none';
            afterAnim.style.opacity = '1';
            
            // Clear PIN
            currentPin = '';
            updatePinDisplay();
            
            // Start countdown immediately
            startCountdown();
            
            console.log('Reset and replay complete. New target:', countdownTarget);
        }
        
        // Initialize
        // Cek localStorage sebelum apapun
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMContentLoaded triggered');
            console.log('birthdayUnlocked:', localStorage.getItem('birthdayUnlocked'));
            console.log('countdownTarget:', countdownTarget);
            
            // Setup reset buttons
            const resetBtn = document.getElementById('resetCountdownBtn');
            if (resetBtn) {
                resetBtn.addEventListener('click', resetCountdown);
            }
            
            if (localStorage.getItem('birthdayUnlocked') === 'true') {
                console.log('Showing birthday page directly');
                document.getElementById('pinContainer').classList.add('hidden');
                document.getElementById('countdownContainer').classList.add('hidden');
                document.getElementById('birthdayContainer').classList.add('show');
                createParticles();
                createConfetti();
                // Play birthday music when birthday page is shown directly
                playBirthdayMusic();
            } else {
                console.log('Showing PIN page first');
                // Tampilkan PIN container sebagai default
                document.getElementById('pinContainer').classList.remove('hidden');
                document.getElementById('countdownContainer').classList.add('hidden');
                document.getElementById('birthdayContainer').classList.remove('show');
                
                // Hide weather animation on PIN page
                const weatherAnim = document.getElementById('weatherAnim');
                if (weatherAnim) {
                    weatherAnim.style.display = 'none';
                }
                
                // Start snow animation on PIN page
                createSnow();
            }
            // Setup Play Game button event listener
            document.addEventListener('click', function(e) {
                if (e.target && e.target.id === 'btnPlayGame') {
                    openSosGame();
                }
            });
        });

        // Birthday Music Player
        let birthdayMusic = null;
        
        function playBirthdayMusic() {
            if (!birthdayMusic) {
                birthdayMusic = new Audio('hbdmusic.mp3');
                birthdayMusic.volume = 0.7;
                birthdayMusic.loop = true; // Loop the birthday music
            }
            
            // Play the birthday music
            birthdayMusic.play().catch(error => {
                console.log('Autoplay prevented, user interaction required');
            });
        }
        
        // After Countdown Animation Sequence
        function triggerAfterCountdownAnim() {
            // Play birthday music when countdown finishes
            playBirthdayMusic();
            
            // Hide countdown content, show after-anim
            document.getElementById('countdownTimer').style.display = 'none';
            document.querySelector('.music-player-premium').style.display = 'none';
            document.querySelector('.countdown-title').style.display = 'none';
            document.querySelector('.countdown-sticker-left').style.display = 'none';
            document.querySelector('.countdown-sticker-right').style.display = 'none';
            
            // Hide Play Game button during animation
            const playGameRow = document.querySelector('.countdown-playgame-row');
            if (playGameRow) {
                playGameRow.style.display = 'none';
            }
            
            const afterAnim = document.getElementById('afterCountdownAnim');
            afterAnim.style.display = 'flex';
            // Step 1: Hey animation
            const hey = document.getElementById('heyAnim');
            hey.classList.remove('hide');
            hey.style.opacity = '1';
            hey.style.transform = 'scale(1)';
            // Step 2: after 2.3s, fade out Hey, show chat
            setTimeout(() => {
                hey.classList.add('hide');
                setTimeout(() => {
                    hey.style.display = 'none';
                    showChatTyping();
                }, 700);
            }, 2300);
        }
        function showChatTyping() {
            const chatAnim = document.getElementById('chatAnim');
            chatAnim.classList.add('show');
            const bubble1 = document.getElementById('chatBubble1');
            const bubble2 = document.getElementById('chatBubble2');
            bubble1.textContent = '';
            bubble2.textContent = '';
            // Typing effect bubble 1
            const text1 = "it's the birthday of the";
            const text2 = "most beautiful woman in the world";
            let idx = 0;
            let idx2 = 0;
            function typeChar1() {
                if (idx <= text1.length) {
                    bubble1.textContent = text1.slice(0, idx);
                    idx++;
                    setTimeout(typeChar1, 70);
                } else {
                    bubble1.classList.add('show');
                    setTimeout(typeChar2, 350);
                }
            }
            function typeChar2() {
                if (idx2 <= text2.length) {
                    bubble2.textContent = text2.slice(0, idx2);
                    idx2++;
                    setTimeout(typeChar2, 70);
                } else {
                    bubble2.classList.add('show');
                    setTimeout(() => {
                        showChatResponse();
                    }, 900);
                }
            }
            setTimeout(typeChar1, 400);
        }
        function showChatResponse() {
            const chatAnim = document.getElementById('chatAnim');
            chatAnim.classList.remove('show');
            setTimeout(() => {
                const chatResp = document.getElementById('chatResponseAnim');
                chatResp.classList.add('show');
                // Bubble anim
                const bubble = chatResp.querySelector('.chat-bubble');
                bubble.style.opacity = '1';
                bubble.style.transform = 'translateX(0)';
                // After 2s, fade out all, confetti, then showBirthday
                setTimeout(() => {
                    fadeOutAfterAnim();
                }, 2000);
            }, 400);
        }
        function fadeOutAfterAnim() {
            const afterAnim = document.getElementById('afterCountdownAnim');
            afterAnim.style.transition = 'opacity 0.7s';
            afterAnim.style.opacity = '0';
            createConfetti();
            setTimeout(() => {
                afterAnim.style.display = 'none';
                // Reset countdown for next year
                const nextYear = new Date(birthdayDate);
                nextYear.setFullYear(nextYear.getFullYear() + 1);
                localStorage.setItem('birthdayCountdownTarget', nextYear.toISOString());
                localStorage.setItem('birthdayUnlocked', 'true');
                showBirthday();
            }, 900);
        }
        // Skip button
        document.addEventListener('DOMContentLoaded', function() {
            const skipBtn = document.getElementById('afterAnimSkip');
            if (skipBtn) {
                skipBtn.onclick = function() {
                    fadeOutAfterAnim();
                };
            }
        });

        // Tiup Lilinnya
        document.addEventListener('DOMContentLoaded', function() {
            var btnTiup = document.getElementById('btnTiupLilin');
            if (btnTiup) {
                btnTiup.onclick = function() {
                    document.querySelectorAll('.flame').forEach(function(f) {
                        f.classList.add('off');
                    });
                };
            }
        });

        // Photo Slider Swipe
        (function() {
            const slider = document.getElementById('photoSlider');
            const slides = slider.querySelectorAll('.photo-slide');
            const indicators = document.getElementById('photoIndicators');
            let current = 0;
            let startX = 0;
            let dx = 0;
            let isDragging = false;
            function updateSlider() {
                slider.style.transform = `translateX(${-current * 100}%)`;
                indicators.innerHTML = '';
                for (let i = 0; i < slides.length; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'dot' + (i === current ? ' active' : '');
                    dot.onclick = () => { current = i; updateSlider(); };
                    indicators.appendChild(dot);
                }
            }
            slider.addEventListener('touchstart', e => {
                isDragging = true;
                startX = e.touches[0].clientX;
            });
            slider.addEventListener('touchmove', e => {
                if (!isDragging) return;
                dx = e.touches[0].clientX - startX;
            });
            slider.addEventListener('touchend', e => {
                if (!isDragging) return;
                if (dx < -30 && current < slides.length - 1) current++;
                if (dx > 30 && current > 0) current--;
                updateSlider();
                isDragging = false;
                dx = 0;
            });
            // Mouse drag (desktop)
            slider.addEventListener('mousedown', e => {
                isDragging = true;
                startX = e.clientX;
            });
            slider.addEventListener('mousemove', e => {
                if (!isDragging) return;
                dx = e.clientX - startX;
            });
            slider.addEventListener('mouseup', e => {
                if (!isDragging) return;
                if (dx < -30 && current < slides.length - 1) current++;
                if (dx > 30 && current > 0) current--;
                updateSlider();
                isDragging = false;
                dx = 0;
            });
            slider.addEventListener('mouseleave', e => { isDragging = false; dx = 0; });
            updateSlider();
        })();

        // Snow Animation for PIN Page
        function createSnow() {
            const snowContainer = document.getElementById('snowContainer');
            if (!snowContainer) return;
            
            // Clear existing snowflakes
            snowContainer.innerHTML = '';
            
            // Create snowflakes
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const snowflake = document.createElement('div');
                    snowflake.className = 'snowflake';
                    snowflake.style.left = Math.random() * 100 + '%';
                    snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    snowflake.style.animationDelay = Math.random() * 2 + 's';
                    snowflake.style.opacity = Math.random() * 0.5 + 0.3;
                    snowflake.style.width = (Math.random() * 4 + 3) + 'px';
                    snowflake.style.height = snowflake.style.width;
                    snowContainer.appendChild(snowflake);
                    
                    // Remove snowflake after animation
                    setTimeout(() => {
                        if (snowflake.parentNode) {
                            snowflake.remove();
                        }
                    }, 5000);
                }, i * 100);
            }
        }
        
        // Weather Animation Cycle
        const weatherAnim = document.getElementById('weatherAnim');
        let weatherState = 0; // 0: rain, 1: sun, 2: cloud
        let rainDrops = [];
        function showRain() {
            weatherAnim.innerHTML = '';
            rainDrops = [];
            for (let i = 0; i < 24; i++) {
                const drop = document.createElement('div');
                drop.className = 'rain-drop';
                drop.style.left = (10 + Math.random() * 80) + '%';
                drop.style.top = (24 + Math.random() * 40) + 'px';
                drop.style.animationDelay = (Math.random() * 0.8) + 's';
                weatherAnim.appendChild(drop);
                rainDrops.push(drop);
            }
        }
        function showSun() {
            weatherAnim.innerHTML = '';
            const sun = document.createElement('div');
            sun.className = 'weather-sun show';
            weatherAnim.appendChild(sun);
        }
        function showCloud() {
            weatherAnim.innerHTML = '';
            const cloud = document.createElement('div');
            cloud.className = 'weather-cloud show';
            cloud.innerHTML = `<svg viewBox="0 0 90 38" fill="none" xmlns="http://www.w3.org/2000/svg"><ellipse cx="30" cy="28" rx="30" ry="18" fill="#E0E6EF"/><ellipse cx="60" cy="22" rx="22" ry="14" fill="#C7D2E3"/><ellipse cx="75" cy="30" rx="15" ry="10" fill="#B0B9C9"/></svg>`;
            weatherAnim.appendChild(cloud);
        }
        function cycleWeather() {
            if (weatherState === 0) { showRain(); }
            else if (weatherState === 1) { showSun(); }
            else if (weatherState === 2) { showCloud(); }
            weatherState = (weatherState + 1) % 3;
        }
        cycleWeather();
        setInterval(cycleWeather, 60000); // 1 menit

        // SOS Game Logic
        let sosGame, sosPlayer = 'love', sosAI = 'x';
        const sosModalBg = document.getElementById('sosModalBg');
        const sosCloseBtn = document.getElementById('sosCloseBtn');
        const sosBoard = document.getElementById('sosBoard');
        const sosResult = document.getElementById('sosResult');

        // Event delegation agar tombol Play Game selalu berfungsi
        // (Sudah ada di DOMContentLoaded, tidak perlu ulangi)
        if (sosCloseBtn) sosCloseBtn.onclick = () => { sosModalBg.classList.add('hide'); };

        function openSosGame() {
            sosModalBg.classList.remove('hide');
            sosResult.textContent = '';
            sosGame = Array(9).fill('');
            renderSosBoard();
        }

        function renderSosBoard() {
            sosBoard.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'sos-cell' + (sosGame[i] === 'x' ? ' x' : sosGame[i] === 'love' ? ' love' : '');
                cell.innerHTML = sosGame[i] === 'x' ? 'X' : sosGame[i] === 'love' ? 'â¤ï¸' : '';
                cell.onclick = () => { if (!sosGame[i] && !checkSosWinner(sosGame)) playerMove(i); };
                sosBoard.appendChild(cell);
            }
        }

        function playerMove(idx) {
            sosGame[idx] = 'love';
            renderSosBoard();
            if (checkSosWinner(sosGame)) {
                sosResult.textContent = 'Congrats You Won My Heart';
                return;
            }
            setTimeout(aiMove, 400);
        }

        function aiMove() {
            // Cari langkah kalah (AI mengalah)
            let move = findLosingMove();
            if (move === -1) {
                // Kalau tidak ada, pilih random kosong
                let empties = sosGame.map((v,i)=>v?'':i).filter(v=>v!==''), idx = empties[Math.floor(Math.random()*empties.length)];
                if (idx !== undefined) sosGame[idx] = 'x';
            } else {
                sosGame[move] = 'x';
            }
            renderSosBoard();
            if (checkSosWinner(sosGame)) {
                sosResult.textContent = 'Congrats You Won My Heart';
            }
        }

        function findLosingMove() {
            // Cari langkah yang tidak menang, AI mengalah
            let empties = sosGame.map((v,i)=>v?'':i).filter(v=>v!=='');
            for (let idx of empties) {
                let test = sosGame.slice();
                test[idx] = 'x';
                if (!checkSosWinner(test)) return idx;
            }
            return -1;
        }

        function checkSosWinner(board) {
            const win = [
                [0,1,2],[3,4,5],[6,7,8],
                [0,3,6],[1,4,7],[2,5,8],
                [0,4,8],[2,4,6]
            ];
            for (let line of win) {
                if (board[line[0]] && board[line[0]] === board[line[1]] && board[line[1]] === board[line[2]]) {
                    return board[line[0]];
                }
            }
            return null;
        }
    </script>
</body>
</html>