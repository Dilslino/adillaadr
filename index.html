<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 22nd Birthday Adilla! üéÇ</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600;700&family=Pacifico&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #FAF7F0 0%, #F5F1E8 50%, #E8C07D 100%);
            min-height: 100vh;
            overflow-x: hidden;
            color: #8B4513;
        }

        /* PIN Entry Section */
        .pin-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #F5F1E8 0%, #D4A574 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .pin-box {
            background: #FAF7F0;
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(139, 69, 19, 0.12);
            padding: 32px 24px 24px 24px;
            min-width: 320px;
            max-width: 90vw;
            position: relative;
            border: 3px solid #E8C07D;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .pin-header {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 8px;
            position: relative;
            margin-bottom: 12px;
        }
        .pin-heart {
            font-size: 1.6rem;
            color: #E8B4B8;
            text-shadow: 0 2px 8px #E8C07D44;
        }
        .pin-close {
            position: absolute;
            right: 0;
            top: 0;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #C8956D;
            cursor: pointer;
            transition: color 0.2s;
        }
        .pin-close:hover {
            color: #8B4513;
        }
        .pin-face {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 18px;
            font-size: 2.2rem;
            color: #8B4513;
        }
        .pin-eye {
            font-size: 1.2rem;
            margin: 0 2px;
        }
        .pin-blush {
            font-size: 1.2rem;
            color: #E8B4B8;
            margin: 0 2px;
        }
        .pin-mouth {
            font-size: 1.1rem;
            margin: 0 4px;
        }
        .pin-input-row {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #F5F1E8;
            border-radius: 12px;
            padding: 8px 18px;
            margin-bottom: 18px;
            border: 2px solid #E8C07D;
            font-size: 1.5rem;
            min-width: 180px;
            box-shadow: 0 2px 8px #E8C07D22;
        }
        .pin-heart-input {
            color: #E8B4B8;
            margin-right: 10px;
            font-size: 1.5rem;
        }
        .pin-underscores {
            letter-spacing: 10px;
            color: #C8956D;
            font-family: 'Dancing Script', cursive;
            font-size: 1.5rem;
            min-width: 80px;
            transition: color 0.2s;
        }
        .cute-keypad {
            margin-top: 8px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            width: 100%;
        }
        .keypad-btn {
            background: linear-gradient(145deg, #E8C07D, #D4A574);
            border: none;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            font-size: 1.3rem;
            font-weight: 600;
            color: #8B4513;
            cursor: pointer;
            box-shadow: 0 2px 8px #E8C07D33;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .keypad-btn:active {
            background: linear-gradient(145deg, #D4A574, #E8C07D);
            transform: scale(0.96);
        }
        .keypad-btn.clear {
            background: linear-gradient(145deg, #E8B4B8, #D4A574);
            color: #A0522D;
        }
        .keypad-btn.enter {
            background: linear-gradient(145deg, #E8C07D, #C8956D);
            color: #fff;
        }
        @media (max-width: 480px) {
            .pin-box {
                min-width: 90vw;
                padding: 18px 6vw 18px 6vw;
            }
            .pin-input-row {
                min-width: 120px;
                font-size: 1.1rem;
            }
            .keypad-btn {
                width: 44px;
                height: 44px;
                font-size: 1.1rem;
            }
        }

        /* Countdown Section */
        .countdown-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #D4A574 0%, #C8956D 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999;
            transition: opacity 0.5s ease;
        }

        .countdown-container.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .countdown-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: #8B4513;
            margin-bottom: 30px;
            text-align: center;
        }

        .countdown-timer {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .countdown-unit {
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            min-width: 80px;
            box-shadow: 0 8px 32px rgba(139, 69, 19, 0.2);
        }

        .countdown-number {
            font-size: 2rem;
            font-weight: 700;
            color: #8B4513;
            display: block;
        }

        .countdown-label {
            font-size: 0.9rem;
            color: #A0522D;
            margin-top: 5px;
        }

        /* Main Birthday Section */
        .birthday-container {
            min-height: 100vh;
            padding: 20px;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .birthday-container.show {
            display: flex !important;
        }

        /* Floating Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #E8C07D;
            border-radius: 50%;
            animation: float 6s infinite linear;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Birthday Cake */
        .cake-container {
            position: relative;
            margin: 40px 0;
            z-index: 10;
        }

        .cake {
            width: 200px;
            height: 120px;
            background: linear-gradient(145deg, #D4A574, #C8956D);
            border-radius: 20px 20px 0 0;
            position: relative;
            box-shadow: 0 10px 30px rgba(139, 69, 19, 0.3);
        }

        .cake-layer {
            position: absolute;
            bottom: 0;
            left: 10px;
            right: 10px;
            height: 40px;
            background: linear-gradient(145deg, #C8956D, #D4A574);
            border-radius: 15px 15px 0 0;
        }

        .cake-layer:nth-child(2) {
            bottom: 40px;
            left: 20px;
            right: 20px;
            height: 35px;
        }

        .cake-layer:nth-child(3) {
            bottom: 75px;
            left: 30px;
            right: 30px;
            height: 30px;
        }

        .frosting {
            position: absolute;
            top: -10px;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(145deg, #FAF7F0, #F5F1E8);
            border-radius: 20px 20px 0 0;
        }

        .candles {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
        }

        .candle {
            width: 4px;
            height: 30px;
            background: linear-gradient(145deg, #E8C07D, #D4A574);
            border-radius: 2px;
            position: relative;
        }

        .flame {
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 8px;
            background: linear-gradient(145deg, #E8C07D, #FFD700);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: flicker 1s infinite alternate;
        }

        @keyframes flicker {
            0%, 100% {
                transform: translateX(-50%) scale(1);
                opacity: 1;
            }
            50% {
                transform: translateX(-50%) scale(1.1);
                opacity: 0.8;
            }
        }

        /* Balloons */
        .balloon {
            position: absolute;
            width: 40px;
            height: 50px;
            border-radius: 50%;
            animation: floatBalloon 8s infinite ease-in-out;
        }

        .balloon:nth-child(1) {
            background: linear-gradient(145deg, #D4A574, #C8956D);
            left: 10%;
            animation-delay: 0s;
        }

        .balloon:nth-child(2) {
            background: linear-gradient(145deg, #E8B4B8, #D4A574);
            left: 20%;
            animation-delay: 1s;
        }

        .balloon:nth-child(3) {
            background: linear-gradient(145deg, #E8C07D, #D4A574);
            left: 30%;
            animation-delay: 2s;
        }

        .balloon:nth-child(4) {
            background: linear-gradient(145deg, #C8956D, #D4A574);
            left: 70%;
            animation-delay: 3s;
        }

        .balloon:nth-child(5) {
            background: linear-gradient(145deg, #E8B4B8, #C8956D);
            left: 80%;
            animation-delay: 4s;
        }

        @keyframes floatBalloon {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-20px) rotate(2deg);
            }
            50% {
                transform: translateY(-10px) rotate(-1deg);
            }
            75% {
                transform: translateY(-30px) rotate(1deg);
            }
        }

        /* Birthday Message */
        .birthday-message {
            text-align: center;
            margin: 40px 0;
            z-index: 10;
        }

        .birthday-title {
            font-family: 'Dancing Script', cursive;
            font-size: 3rem;
            color: #8B4513;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(139, 69, 19, 0.2);
            animation: fadeInUp 1s ease-out;
        }

        .birthday-subtitle {
            font-family: 'Pacifico', cursive;
            font-size: 1.5rem;
            color: #A0522D;
            margin-bottom: 30px;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        .birthday-text {
            font-size: 1.1rem;
            color: #8B4513;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
            animation: fadeInUp 1s ease-out 0.6s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Photo Frame */
        .photo-frame {
            margin: 40px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(139, 69, 19, 0.2);
            animation: heartbeat 2s infinite;
            z-index: 10;
        }

        .photo-placeholder {
            width: 200px;
            height: 200px;
            background: linear-gradient(145deg, #D4A574, #C8956D);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #8B4513;
            font-size: 1.2rem;
            font-weight: 600;
        }

        @keyframes heartbeat {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
        }

        /* Audio Controls */
        .audio-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
        }

        .audio-btn {
            background: linear-gradient(145deg, #E8C07D, #D4A574);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: #8B4513;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.2);
            transition: all 0.3s ease;
        }

        .audio-btn:hover {
            transform: scale(1.1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .birthday-title {
                font-size: 2.5rem;
            }
            
            .birthday-subtitle {
                font-size: 1.3rem;
            }
            
            .cake {
                width: 150px;
                height: 90px;
            }
            
            .keypad-btn {
                padding: 15px;
                font-size: 1.2rem;
                min-height: 50px;
            }
            
            .countdown-title {
                font-size: 2rem;
            }
            
            .countdown-number {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .birthday-title {
                font-size: 2rem;
            }
            
            .cake {
                width: 120px;
                height: 70px;
            }
            
            .candles {
                gap: 4px;
            }
            
            .candle {
                width: 3px;
                height: 25px;
            }
            
            .flame {
                width: 5px;
                height: 6px;
            }
        }

        /* Error Animation */
        .shake {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            25% {
                transform: translateX(-5px);
            }
            75% {
                transform: translateX(5px);
            }
        }

        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #E8C07D;
            animation: confettiFall 3s linear forwards;
        }

        @keyframes confettiFall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        .pin-container.hidden {
            display: none !important;
        }
        .countdown-container.hidden {
            display: none !important;
        }
        .birthday-container.show {
            display: flex !important;
        }
        .pin-sticker {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 2;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            gap: 18px;
        }
        .pin-sticker-left { left: -110px; align-items: flex-end; }
        .pin-sticker-right { right: -110px; align-items: flex-start; }
        .pin-sticker img { width: 90px; max-width: 22vw; border-radius: 18px; box-shadow: 0 4px 18px #8B451322; background: #fff8; margin: 0 0 8px 0; transform: rotate(-6deg); opacity: 0.95; transition: transform 0.2s; }
        .pin-sticker-right img { transform: rotate(6deg); }
        @media (max-width: 600px) {
            .pin-sticker-left, .pin-sticker-right { left: -70px; right: -70px; }
            .pin-sticker img { width: 48px; }
        }
        .countdown-sticker img { width: 40px; border-radius: 12px; border: 2px solid #E8C07D; background: #fff8; }
        @media (max-width: 600px) {
            .countdown-sticker-left, .countdown-sticker-right { left: -24px; right: -24px; }
            .countdown-sticker img { width: 28px; }
        }
    .music-player {
        margin: 24px auto 0 auto;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        background: #FAF7F0;
        border-radius: 16px;
        box-shadow: 0 2px 8px #E8C07D22;
        padding: 8px 16px;
        width: fit-content;
    }
    .music-player button {
        background: linear-gradient(145deg, #E8C07D, #D4A574);
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        color: #8B4513;
        font-size: 1.2rem;
        cursor: pointer;
        box-shadow: 0 2px 8px #E8C07D33;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .music-player button:active {
        background: linear-gradient(145deg, #D4A574, #E8C07D);
        transform: scale(0.96);
    }
    .music-player input[type=range] {
        accent-color: #E8C07D;
    }
    @media (max-width: 600px) {
        .music-player { padding: 6px 4px; }
        .music-player button { width: 28px; height: 28px; font-size: 1em; }
        .music-player input[type=range] { width: 50px; }
    }
    </style>
</head>
<body>
    <!-- PIN Entry Section -->
    <div class="pin-container" id="pinContainer" style="position: relative;">
        <div class="pin-sticker pin-sticker-left">
            <img src="sticker1.jpg" alt="sticker kiri 1">
            <img src="sticker2.jpg" alt="sticker kiri 2">
            <img src="sticker3.jpg" alt="sticker kiri 3">
        </div>
        <div class="pin-sticker pin-sticker-right">
            <img src="sticker4.jpg" alt="sticker kanan 1">
            <img src="sticker5.jpg" alt="sticker kanan 2">
            <img src="sticker6.jpg" alt="sticker kanan 3">
        </div>
        <div class="pin-box">
            <div class="pin-header-img-row" style="display:flex;align-items:center;justify-content:center;margin-bottom:12px;gap:8px;">
                <span style="display:inline-block;width:18px;height:18px;background:#8B4513;border-radius:50%;"></span>
                <img src="nailoong.jpg" alt="nailoong" style="width:32px;height:32px;border-radius:50%;object-fit:cover;box-shadow:0 2px 8px #8B451344;">
                <span style="display:inline-block;width:8px;height:8px;background:#8B4513;border-radius:50%;"></span>
                <img src="nailoong.jpg" alt="nailoong" style="width:32px;height:32px;border-radius:50%;object-fit:cover;box-shadow:0 2px 8px #8B451344;">
                <span style="display:inline-block;width:18px;height:18px;background:#8B4513;border-radius:50%;"></span>
            </div>
            <div class="pin-face">
                <span class="pin-eye">&#11044;</span>
                <span class="pin-blush">&#x1F97A;</span>
                <span class="pin-mouth">&#x25CF;</span>
                <span class="pin-blush">&#x1F97A;</span>
                <span class="pin-eye">&#11044;</span>
            </div>
            <div class="pin-input-row">
                <span class="pin-heart-input">&#x2764;</span>
                <span class="pin-underscores" id="pinInput">
                    _ _ _ _
                </span>
            </div>
            <div class="keypad cute-keypad">
                <button class="keypad-btn" onclick="addDigit('1')">1</button>
                <button class="keypad-btn" onclick="addDigit('2')">2</button>
                <button class="keypad-btn" onclick="addDigit('3')">3</button>
                <button class="keypad-btn" onclick="addDigit('4')">4</button>
                <button class="keypad-btn" onclick="addDigit('5')">5</button>
                <button class="keypad-btn" onclick="addDigit('6')">6</button>
                <button class="keypad-btn" onclick="addDigit('7')">7</button>
                <button class="keypad-btn" onclick="addDigit('8')">8</button>
                <button class="keypad-btn" onclick="addDigit('9')">9</button>
                <button class="keypad-btn clear" onclick="clearPin()">&#x232B;</button>
                <button class="keypad-btn" onclick="addDigit('0')">0</button>
                <button class="keypad-btn enter" onclick="checkPin()">&#x2714;</button>
            </div>
        </div>
    </div>

    <!-- Countdown Section -->
    <div class="countdown-container" id="countdownContainer">
        <div class="countdown-sticker countdown-sticker-left">
            <img src="sticker1.jpg" alt="sticker kiri 1">
            <img src="sticker2.jpg" alt="sticker kiri 2">
            <img src="sticker3.jpg" alt="sticker kiri 3">
        </div>
        <div class="countdown-sticker countdown-sticker-right">
            <img src="sticker4.jpg" alt="sticker kanan 1">
            <img src="sticker5.jpg" alt="sticker kanan 2">
            <img src="sticker6.jpg" alt="sticker kanan 3">
        </div>
        <h1 class="countdown-title">Almost there...</h1>
        <div class="countdown-timer" id="countdownTimer">
            <div class="countdown-unit">
                <span class="countdown-number" id="days">00</span>
                <div class="countdown-label">Days</div>
            </div>
            <div class="countdown-unit">
                <span class="countdown-number" id="hours">00</span>
                <div class="countdown-label">Hours</div>
            </div>
            <div class="countdown-unit">
                <span class="countdown-number" id="minutes">00</span>
                <div class="countdown-label">Minutes</div>
            </div>
            <div class="countdown-unit">
                <span class="countdown-number" id="seconds">00</span>
                <div class="countdown-label">Seconds</div>
            </div>
        </div>
        <div class="music-player">
            <button id="prevBtn">‚èÆÔ∏è</button>
            <button id="playPauseBtn">‚ñ∂Ô∏è</button>
            <button id="nextBtn">‚è≠Ô∏è</button>
            <input id="volumeSlider" type="range" min="0" max="1" step="0.01" value="0.7" style="vertical-align:middle;width:80px;">
            <span id="musicTitle" style="font-size:0.95em;color:#8B4513;margin-left:8px;"></span>
        </div>
        <audio id="audioPlayer" preload="auto"></audio>
    </div>

    <!-- Main Birthday Section -->
    <div class="birthday-container" id="birthdayContainer">
        <!-- Floating Particles -->
        <div class="particles" id="particles"></div>

        <!-- Floating Balloons -->
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>
        <div class="balloon"></div>

        <!-- Birthday Message -->
        <div class="birthday-message">
            <h1 class="birthday-title">Happy 22nd Birthday Adilla!</h1>
            <h2 class="birthday-subtitle">üéÇ A Special Day Just For You üéÇ</h2>
            <p class="birthday-text">
                Today is all about celebrating you and the amazing person you are. 
                May your 22nd year be filled with love, joy, and beautiful moments. 
                You deserve all the happiness in the world! ‚ú®
            </p>
        </div>

        <!-- Birthday Cake -->
        <div class="cake-container">
            <div class="cake">
                <div class="cake-layer"></div>
                <div class="cake-layer"></div>
                <div class="cake-layer"></div>
                <div class="frosting"></div>
                <div class="candles">
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                    <div class="candle"><div class="flame"></div></div>
                </div>
            </div>
        </div>

        <!-- Photo Frame -->
        <div class="photo-frame">
            <div class="photo-placeholder">
                üì∏ Adilla's Photo üì∏
            </div>
        </div>

        <!-- Audio Controls -->
        <div class="audio-controls">
            <button class="audio-btn" id="audioBtn" onclick="toggleAudio()">üéµ</button>
        </div>
    </div>

    <script>
        // PIN System
        let currentPin = '';
        const correctPin = '1407'; // PIN baru
        // Atur countdown agar tidak mengulang saat refresh atau input PIN ulang
        let countdownTarget;
        if (localStorage.getItem('birthdayCountdownTarget')) {
            countdownTarget = new Date(localStorage.getItem('birthdayCountdownTarget'));
        } else {
            countdownTarget = new Date(Date.now() + 4 * 24 * 60 * 60 * 1000); // 4 hari
            localStorage.setItem('birthdayCountdownTarget', countdownTarget.toISOString());
        }
        let birthdayDate = countdownTarget;

        function addDigit(digit) {
            if (currentPin.length < 4) {
                currentPin += digit;
                updatePinDisplay();
            }
        }

        function clearPin() {
            currentPin = '';
            updatePinDisplay();
        }

        function updatePinDisplay() {
            const display = document.getElementById('pinInput');
            let pinVisual = '';
            for (let i = 0; i < 4; i++) {
                if (i < currentPin.length) {
                    pinVisual += '<span style="color:#E8B4B8;font-size:1.3em">&#10084;</span> ';
                } else {
                    pinVisual += '_ ';
                }
            }
            display.innerHTML = pinVisual.trim();
        }

        function checkPin() {
            if (currentPin.length !== 4) return; // Hanya cek jika 4 digit
            if (currentPin === correctPin) {
                alert('kamu pinter bgt Adilla');
                checkBirthdayDate();
            } else {
                alert('pin kamu salah dilleeehh');
                const display = document.getElementById('pinInput');
                display.classList.add('shake');
                setTimeout(() => {
                    display.classList.remove('shake');
                }, 500);
                clearPin();
            }
        }

        // Birthday Date Check
        function checkBirthdayDate() {
            const now = new Date();
            console.log('checkBirthdayDate:', now, 'vs', birthdayDate);
            if (now >= birthdayDate) {
                showBirthday();
            } else {
                showCountdown();
            }
        }

        function showCountdown() {
            document.getElementById('pinContainer').classList.add('hidden');
            document.getElementById('countdownContainer').classList.remove('hidden');
            document.getElementById('birthdayContainer').classList.remove('show');
            startCountdown();
        }

        function showBirthday() {
            console.log('showBirthday called');
            document.getElementById('pinContainer').classList.add('hidden');
            document.getElementById('countdownContainer').classList.add('hidden');
            document.getElementById('birthdayContainer').classList.add('show');
            createParticles();
            createConfetti();
        }

        // Countdown Timer
        function startCountdown() {
            const countdown = setInterval(() => {
                const now = new Date();
                const timeLeft = birthdayDate - now;
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    // Simpan flag ke localStorage agar tidak mengulang countdown
                    localStorage.setItem('birthdayUnlocked', 'true');
                    showBirthday();
                    return;
                }
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            }, 1000);
        }

        // Particles Animation
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 6 + 's';
                    particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                    particlesContainer.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 6000);
                }, i * 200);
            }
        }

        // Confetti Animation
        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = ['#E8C07D', '#D4A574', '#E8B4B8', '#C8956D'][Math.floor(Math.random() * 4)];
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 50);
            }
        }

        // Audio Controls
        let audioPlaying = false;
        function toggleAudio() {
            const audioBtn = document.getElementById('audioBtn');
            if (audioPlaying) {
                audioBtn.textContent = 'üéµ';
                audioPlaying = false;
            } else {
                audioBtn.textContent = '‚è∏Ô∏è';
                audioPlaying = true;
                // Here you would add actual audio functionality
            }
        }

        // Playlist logic
        const playlist = [
            { src: 'music1.mp3', title: 'Lagu 1' },
            { src: 'music2.mp3', title: 'Lagu 2' },
            { src: 'music3.mp3', title: 'Lagu 3' }
        ];
        let currentTrack = 0;
        const audioPlayer = document.getElementById('audioPlayer');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const musicTitle = document.getElementById('musicTitle');

        function loadTrack(idx) {
            audioPlayer.src = playlist[idx].src;
            musicTitle.textContent = playlist[idx].title;
        }
        function playTrack() {
            audioPlayer.play();
            playPauseBtn.textContent = '‚è∏Ô∏è';
        }
        function pauseTrack() {
            audioPlayer.pause();
            playPauseBtn.textContent = '‚ñ∂Ô∏è';
        }
        playPauseBtn.onclick = function() {
            if (audioPlayer.paused) playTrack(); else pauseTrack();
        };
        prevBtn.onclick = function() {
            currentTrack = (currentTrack - 1 + playlist.length) % playlist.length;
            loadTrack(currentTrack);
            playTrack();
        };
        nextBtn.onclick = function() {
            currentTrack = (currentTrack + 1) % playlist.length;
            loadTrack(currentTrack);
            playTrack();
        };
        volumeSlider.oninput = function() {
            audioPlayer.volume = volumeSlider.value;
        };
        audioPlayer.onended = function() {
            nextBtn.onclick();
        };
        // Inisialisasi
        loadTrack(currentTrack);
        audioPlayer.volume = volumeSlider.value;

        // Balloon Pop Interaction
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('balloon')) {
                e.target.style.animation = 'none';
                e.target.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    e.target.style.opacity = '0';
                    createConfetti();
                }, 200);
            }
        });

        // Cake Candle Blow Interaction
        document.addEventListener('click', function(e) {
            if (e.target.closest('.cake-container')) {
                const flames = document.querySelectorAll('.flame');
                flames.forEach((flame, index) => {
                    setTimeout(() => {
                        flame.style.animation = 'none';
                        flame.style.opacity = '0';
                    }, index * 100);
                });
                setTimeout(() => {
                    createConfetti();
                }, 1000);
            }
        });

        // Initialize
        // Cek localStorage sebelum apapun
        if (localStorage.getItem('birthdayUnlocked') === 'true') {
            document.addEventListener('DOMContentLoaded', function() {
                document.getElementById('pinContainer').classList.add('hidden');
                document.getElementById('countdownContainer').classList.add('hidden');
                document.getElementById('birthdayContainer').classList.add('show');
                createParticles();
                createConfetti();
            });
        } else {
            // Saat halaman dibuka
            // ...seluruh kode PIN dan countdown tetap berjalan di sini...
        }
    </script>
</body>
</html>